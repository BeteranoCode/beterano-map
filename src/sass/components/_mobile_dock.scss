/* Mobile dock: 2 | center | 2  */
html,
body,
#root,
.layout-container {
  /* Evita que un transform/overflow cree un containing block
     y “pegue” o recorte el position:fixed del dock */
  transform: none !important;
  overflow: visible !important;
}

/* seguridad extra: el mapa jamás debe pasar por encima */
.map-leaflet-wrapper,
.leaflet-container {
  z-index: 0 !important;
}

/* cuando el dock está visible, no añadimos huecos al mapa */
body.has-mobile-dock .map-container,
body.has-mobile-dock .map-leaflet-wrapper {
  padding-bottom: 0 !important;
  margin-bottom: 0 !important;
}

/* ================== DOCK ================== */
.mobile-dock {
  /* === variables === */
  --center-base: 88px;

  /* Central actual (-30% vs base) */
  --center: calc(var(--center-base) * 0.7);
  /* Altura del dock compacta (la que teníamos antes) */
  --dock-h: clamp(50px, calc(var(--center) * 0.55), 72px);

  --pad-h: 16px;
  --btn: clamp(28px, calc(var(--dock-h) - 12px), 52px);
  --icon-scale: 0.8;

  /* ⬇️ SIEMPRE flotante sobre el mapa */
  position: fixed !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;

  width: 100vw !important;
  height: calc(var(--dock-h) + env(safe-area-inset-bottom, 0px));
  padding: 0 var(--pad-h) env(safe-area-inset-bottom, 0px);
  background: #ffd024;
  border-radius: 20px 20px 0 0;
  box-shadow: none;
  z-index: 20000 !important; /* > Leaflet panes/popups */

  display: grid;
  grid-template-columns: var(--btn) var(--btn) var(--center) var(--btn) var(--btn);
  grid-auto-rows: var(--dock-h);
  align-items: center;
  justify-content: space-between;
  column-gap: 12px;
  overflow: visible;

  /* si algún ancestro tiene transform, lo anulamos arriba;
     aquí redundamos por si acaso */
  transform: none !important;
}

/* ===== Botones laterales ===== */
.mobile-dock .dock-btn {
  all: unset;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  border-radius: 12px;
  color: #111;
  cursor: pointer;
  line-height: 0;
}

/* SVG minimal (-20%) — tamaño estable */
.mobile-dock .dock-icon {
  width: calc(min(var(--btn), var(--dock-h)) * 0.6 * var(--icon-scale));
  height: calc(min(var(--btn), var(--dock-h)) * 0.6 * var(--icon-scale));
  display: block;
}

/* ===== Botón central (Garagex) ===== */
.mobile-dock .dock-center {
  position: relative;
  grid-column: 3;
  justify-self: center;
  align-self: center;

  /* sobresale 20% de la altura del dock */
  transform: translateY(calc(-0.20 * var(--dock-h)));

  width: var(--center);
  height: var(--center);
  border-radius: 50%;
  background: #ffd024;
  border: none;
  box-shadow: none;

  display: grid;
  place-items: center;
  line-height: 0;
  z-index: 20002;
  pointer-events: auto;
}

.mobile-dock .dock-center img,
.mobile-dock .dock-center svg {
  width: 70%;
  height: 70%;
  object-fit: contain;
  display: block;
  pointer-events: none;
}

/* solo móvil */
@media (min-width: 901px) {
  .mobile-dock { display: none; }
}
